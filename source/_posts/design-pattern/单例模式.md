---
title:  单例模式
date: 
categories:
- 设计模式
tags:
---

## 单例模式（创建型）

**保证一个类仅有一个实例，并提供一个访问它的全局访问点**，这样的模式就叫做单例模式。

获取实例方法一：

```javascript
class SingleDog {
	show() {
		console.log('我是一个单例对象')
	}
	getInstance() {
		if (!singleDog.instance) {
			SingleDog.instance = new SingleDog()
		}
		return SingleDog.instance
	}
}
```

获取实例方法二：

```javascript
SingleDog.getInstance = (function() {
	let instance = null
	return function() {
		if (!instance) {
			instance = new SingleDoog()
		}
		return instance
	}
})()
```

指向了唯一的实例

```javascript
const s1 = SingleDog.getInstance()
const s2 = SingleDog.getInstance()
s1 === s2 // true
```



```javascript
let Vue // 这个Vue的作用和楼上的instance作用一样

export function install (_Vue) {
  // 判断传入的Vue实例对象是否已经被install过Vuex插件（是否有了唯一的state）
  if (Vue && _Vue === Vue) {
    if (process.env.NODE_ENV !== 'production') {
      console.error(
        '[vuex] already installed. Vue.use(Vuex) should be called only once.'
      )
    }
    return
  }
  // 若没有，则为这个Vue实例对象install一个唯一的Vuex
  Vue = _Vue
  // 将Vuex的初始化逻辑写进Vue的钩子函数里
  applyMixin(Vue)
}
```


